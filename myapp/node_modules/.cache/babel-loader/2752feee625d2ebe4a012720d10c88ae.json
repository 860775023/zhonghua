{"remainingRequest":"C:\\Users\\86131\\Desktop\\物流动态视界\\myapp\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\86131\\Desktop\\物流动态视界\\myapp\\node_modules\\vue-loader-v16\\dist\\templateLoader.js??ref--6!C:\\Users\\86131\\Desktop\\物流动态视界\\myapp\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\86131\\Desktop\\物流动态视界\\myapp\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!C:\\Users\\86131\\Desktop\\物流动态视界\\myapp\\src\\views\\MobileCamera.vue?vue&type=template&id=11c92421&scoped=true","dependencies":[{"path":"C:\\Users\\86131\\Desktop\\物流动态视界\\myapp\\src\\views\\MobileCamera.vue","mtime":1735313422777},{"path":"C:\\Users\\86131\\Desktop\\物流动态视界\\myapp\\babel.config.js","mtime":1732176480598},{"path":"C:\\Users\\86131\\Desktop\\物流动态视界\\myapp\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1732372474236},{"path":"C:\\Users\\86131\\Desktop\\物流动态视界\\myapp\\node_modules\\babel-loader\\lib\\index.js","mtime":1732372475869},{"path":"C:\\Users\\86131\\Desktop\\物流动态视界\\myapp\\node_modules\\vue-loader-v16\\dist\\templateLoader.js","mtime":1732372477042},{"path":"C:\\Users\\86131\\Desktop\\物流动态视界\\myapp\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1732372474236},{"path":"C:\\Users\\86131\\Desktop\\物流动态视界\\myapp\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1732372476246}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgY3JlYXRlRWxlbWVudFZOb2RlIGFzIF9jcmVhdGVFbGVtZW50Vk5vZGUsIG9wZW5CbG9jayBhcyBfb3BlbkJsb2NrLCBjcmVhdGVFbGVtZW50QmxvY2sgYXMgX2NyZWF0ZUVsZW1lbnRCbG9jaywgcHVzaFNjb3BlSWQgYXMgX3B1c2hTY29wZUlkLCBwb3BTY29wZUlkIGFzIF9wb3BTY29wZUlkIH0gZnJvbSAidnVlIjsKCnZhciBfd2l0aFNjb3BlSWQgPSBmdW5jdGlvbiBfd2l0aFNjb3BlSWQobikgewogIHJldHVybiBfcHVzaFNjb3BlSWQoImRhdGEtdi0xMWM5MjQyMSIpLCBuID0gbigpLCBfcG9wU2NvcGVJZCgpLCBuOwp9OwoKdmFyIF9ob2lzdGVkXzEgPSB7CiAgImNsYXNzIjogIm1vYmlsZS1jYW1lcmEiCn07Cgp2YXIgX2hvaXN0ZWRfMiA9IC8qI19fUFVSRV9fKi9fd2l0aFNjb3BlSWQoZnVuY3Rpb24gKCkgewogIHJldHVybiAvKiNfX1BVUkVfXyovX2NyZWF0ZUVsZW1lbnRWTm9kZSgiaDIiLCBudWxsLCAiQUdW55uR5o6n5pGE5YOP5aS0IiwgLTEKICAvKiBIT0lTVEVEICovCiAgKTsKfSk7Cgp2YXIgX2hvaXN0ZWRfMyA9IHsKICAiY2xhc3MiOiAiY2FtZXJhLWNvbnRhaW5lciIKfTsKdmFyIF9ob2lzdGVkXzQgPSB7CiAgcmVmOiAidmlkZW9FbGVtZW50IiwKICBhdXRvcGxheTogIiIsCiAgcGxheXNpbmxpbmU6ICIiCn07CnZhciBfaG9pc3RlZF81ID0gewogICJjbGFzcyI6ICJjb250cm9scyIKfTsKdmFyIF9ob2lzdGVkXzYgPSBbImRpc2FibGVkIl07CnZhciBfaG9pc3RlZF83ID0gWyJkaXNhYmxlZCJdOwp2YXIgX2hvaXN0ZWRfOCA9IFsiZGlzYWJsZWQiXTsKZXhwb3J0IGZ1bmN0aW9uIHJlbmRlcihfY3R4LCBfY2FjaGUsICRwcm9wcywgJHNldHVwLCAkZGF0YSwgJG9wdGlvbnMpIHsKICByZXR1cm4gX29wZW5CbG9jaygpLCBfY3JlYXRlRWxlbWVudEJsb2NrKCJkaXYiLCBfaG9pc3RlZF8xLCBbX2hvaXN0ZWRfMiwgX2NyZWF0ZUVsZW1lbnRWTm9kZSgiZGl2IiwgX2hvaXN0ZWRfMywgW19jcmVhdGVFbGVtZW50Vk5vZGUoInZpZGVvIiwgX2hvaXN0ZWRfNCwgbnVsbCwgNTEyCiAgLyogTkVFRF9QQVRDSCAqLwogICksIF9jcmVhdGVFbGVtZW50Vk5vZGUoImRpdiIsIF9ob2lzdGVkXzUsIFtfY3JlYXRlRWxlbWVudFZOb2RlKCJidXR0b24iLCB7CiAgICBvbkNsaWNrOiBfY2FjaGVbMF0gfHwgKF9jYWNoZVswXSA9IGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuICRzZXR1cC5zdGFydENhbWVyYSAmJiAkc2V0dXAuc3RhcnRDYW1lcmEuYXBwbHkoJHNldHVwLCBhcmd1bWVudHMpOwogICAgfSksCiAgICBkaXNhYmxlZDogJHNldHVwLmlzQ2FtZXJhQWN0aXZlCiAgfSwgIuW8gOWQr+aRhOWDj+WktCIsIDgKICAvKiBQUk9QUyAqLwogICwgX2hvaXN0ZWRfNiksIF9jcmVhdGVFbGVtZW50Vk5vZGUoImJ1dHRvbiIsIHsKICAgIG9uQ2xpY2s6IF9jYWNoZVsxXSB8fCAoX2NhY2hlWzFdID0gZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gJHNldHVwLnN0b3BDYW1lcmEgJiYgJHNldHVwLnN0b3BDYW1lcmEuYXBwbHkoJHNldHVwLCBhcmd1bWVudHMpOwogICAgfSksCiAgICBkaXNhYmxlZDogISRzZXR1cC5pc0NhbWVyYUFjdGl2ZQogIH0sICLlhbPpl63mkYTlg4/lpLQiLCA4CiAgLyogUFJPUFMgKi8KICAsIF9ob2lzdGVkXzcpLCBfY3JlYXRlRWxlbWVudFZOb2RlKCJidXR0b24iLCB7CiAgICBvbkNsaWNrOiBfY2FjaGVbMl0gfHwgKF9jYWNoZVsyXSA9IGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuICRzZXR1cC5zd2l0Y2hDYW1lcmEgJiYgJHNldHVwLnN3aXRjaENhbWVyYS5hcHBseSgkc2V0dXAsIGFyZ3VtZW50cyk7CiAgICB9KSwKICAgIGRpc2FibGVkOiAhJHNldHVwLmlzQ2FtZXJhQWN0aXZlCiAgfSwgIuWIh+aNouaRhOWDj+WktCIsIDgKICAvKiBQUk9QUyAqLwogICwgX2hvaXN0ZWRfOCldKV0pXSk7Cn0="},{"version":3,"sources":["C:\\Users\\86131\\Desktop\\物流动态视界\\myapp\\src\\views\\MobileCamera.vue"],"names":[],"mappings":";;;;;;;AACO,WAAM;;;;sBACT,mBAAA,CAAiB,IAAjB,EAAiB,IAAjB,EAAI,UAAJ,EAAY,CAAA;AAAA;AAAZ,G;;;;AACK,WAAM;;;AACF,EAAA,GAAG,EAAC,c;AAAe,EAAA,QAAQ,EAAR,E;AAAS,EAAA,WAAW,EAAX;;;AAC9B,WAAM;;;;;;uBAJf,mBAAA,CAUM,KAVN,EAAA,UAAA,EAUM,CATJ,UASI,EARJ,mBAAA,CAOM,KAPN,EAAA,UAAA,EAOM,CANJ,mBAAA,CAAuD,OAAvD,EAAA,UAAA,EAAuD,IAAvD,EAAuD;AAAA;AAAvD,GAMI,EALJ,mBAAA,CAIM,KAJN,EAAA,UAAA,EAIM,CAHJ,mBAAA,CAAsE,QAAtE,EAAsE;AAA7D,IAAA,OAAK,EAAA,MAAA,CAAA,CAAA,CAAA,KAAA,MAAA,CAAA,CAAA,CAAA,GAAA;AAAA,aAAE,MAAA,CAAA,WAAA,IAAA,MAAA,CAAA,WAAA,OAAA,MAAA,YAAF;AAAA,KAAA,CAAwD;AAAxC,IAAA,QAAQ,EAAE,MAAA,CAAA;AAA8B,GAAtE,EAAwD,OAAxD,EAA6D;AAAA;AAA7D,IAA6D,UAA7D,CAGI,EAFJ,mBAAA,CAAsE,QAAtE,EAAsE;AAA7D,IAAA,OAAK,EAAA,MAAA,CAAA,CAAA,CAAA,KAAA,MAAA,CAAA,CAAA,CAAA,GAAA;AAAA,aAAE,MAAA,CAAA,UAAA,IAAA,MAAA,CAAA,UAAA,OAAA,MAAA,YAAF;AAAA,KAAA,CAAwD;AAAzC,IAAA,QAAQ,EAAA,CAAG,MAAA,CAAA;AAA8B,GAAtE,EAAwD,OAAxD,EAA6D;AAAA;AAA7D,IAA6D,UAA7D,CAEI,EADJ,mBAAA,CAAwE,QAAxE,EAAwE;AAA/D,IAAA,OAAK,EAAA,MAAA,CAAA,CAAA,CAAA,KAAA,MAAA,CAAA,CAAA,CAAA,GAAA;AAAA,aAAE,MAAA,CAAA,YAAA,IAAA,MAAA,CAAA,YAAA,OAAA,MAAA,YAAF;AAAA,KAAA,CAA0D;AAAzC,IAAA,QAAQ,EAAA,CAAG,MAAA,CAAA;AAA8B,GAAxE,EAA0D,OAA1D,EAA+D;AAAA;AAA/D,IAA+D,UAA/D,CACI,CAJN,CAKI,CAPN,CAQI,CAVN,C","sourcesContent":["<template>\r\n  <div class=\"mobile-camera\">\r\n    <h2>AGV监控摄像头</h2>\r\n    <div class=\"camera-container\">\r\n      <video ref=\"videoElement\" autoplay playsinline></video>\r\n      <div class=\"controls\">\r\n        <button @click=\"startCamera\" :disabled=\"isCameraActive\">开启摄像头</button>\r\n        <button @click=\"stopCamera\" :disabled=\"!isCameraActive\">关闭摄像头</button>\r\n        <button @click=\"switchCamera\" :disabled=\"!isCameraActive\">切换摄像头</button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, onMounted, onUnmounted } from 'vue';\r\n\r\nexport default {\r\n  name: 'MobileCamera',\r\n  setup() {\r\n    const videoElement = ref(null);\r\n    const isCameraActive = ref(false);\r\n    let mediaStream = null;\r\n    let currentFacingMode = 'environment'; // 默认使用后置摄像头\r\n\r\n    const startCamera = async () => {\r\n      try {\r\n        mediaStream = await navigator.mediaDevices.getUserMedia({\r\n          video: { facingMode: currentFacingMode }\r\n        });\r\n        \r\n        if (videoElement.value) {\r\n          videoElement.value.srcObject = mediaStream;\r\n          isCameraActive.value = true;\r\n        }\r\n      } catch (error) {\r\n        console.error('Error accessing camera:', error);\r\n        alert('无法访问摄像头，请确保已授予权限。');\r\n      }\r\n    };\r\n\r\n    const stopCamera = () => {\r\n      if (mediaStream) {\r\n        mediaStream.getTracks().forEach(track => track.stop());\r\n        if (videoElement.value) {\r\n          videoElement.value.srcObject = null;\r\n        }\r\n        isCameraActive.value = false;\r\n      }\r\n    };\r\n\r\n    const switchCamera = async () => {\r\n      currentFacingMode = currentFacingMode === 'environment' ? 'user' : 'environment';\r\n      stopCamera();\r\n      await startCamera();\r\n    };\r\n\r\n    onUnmounted(() => {\r\n      stopCamera();\r\n    });\r\n\r\n    return {\r\n      videoElement,\r\n      isCameraActive,\r\n      startCamera,\r\n      stopCamera,\r\n      switchCamera\r\n    };\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.mobile-camera {\r\n  height: 100vh;\r\n  background: #000;\r\n  color: white;\r\n  padding: 20px;\r\n}\r\n\r\nh2 {\r\n  text-align: center;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.camera-container {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 20px;\r\n}\r\n\r\nvideo {\r\n  width: 100%;\r\n  max-height: 70vh;\r\n  object-fit: cover;\r\n  border-radius: 8px;\r\n}\r\n\r\n.controls {\r\n  display: flex;\r\n  gap: 10px;\r\n  justify-content: center;\r\n  flex-wrap: wrap;\r\n}\r\n\r\nbutton {\r\n  padding: 12px 24px;\r\n  border: none;\r\n  border-radius: 4px;\r\n  background: #1890ff;\r\n  color: white;\r\n  font-size: 16px;\r\n}\r\n\r\nbutton:disabled {\r\n  background: #666;\r\n}\r\n</style> "],"sourceRoot":""}]}