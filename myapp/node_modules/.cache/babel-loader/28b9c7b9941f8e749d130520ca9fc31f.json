{"remainingRequest":"D:\\project\\中国古代天文学成就可视化\\myapp\\node_modules\\babel-loader\\lib\\index.js!D:\\project\\中国古代天文学成就可视化\\myapp\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\project\\中国古代天文学成就可视化\\myapp\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!D:\\project\\中国古代天文学成就可视化\\myapp\\src\\components\\MobileCamera.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\project\\中国古代天文学成就可视化\\myapp\\src\\components\\MobileCamera.vue","mtime":1743866003238},{"path":"D:\\project\\中国古代天文学成就可视化\\myapp\\babel.config.js","mtime":1732176480598},{"path":"D:\\project\\中国古代天文学成就可视化\\myapp\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1732372474236},{"path":"D:\\project\\中国古代天文学成就可视化\\myapp\\node_modules\\babel-loader\\lib\\index.js","mtime":1732372475869},{"path":"D:\\project\\中国古代天文学成就可视化\\myapp\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1732372474236},{"path":"D:\\project\\中国古代天文学成就可视化\\myapp\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1732372476246}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkQ6XFxwcm9qZWN0XFxcdTRFMkRcdTU2RkRcdTUzRTRcdTRFRTNcdTU5MjlcdTY1ODdcdTVCNjZcdTYyMTBcdTVDMzFcdTUzRUZcdTg5QzZcdTUzMTZcXG15YXBwXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZVxcaGVscGVyc1xcZXNtXFxhc3luY1RvR2VuZXJhdG9yLmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5lcnJvci5jYXVzZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmVycm9yLnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIudGltZXJzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmRlc2NyaXB0aW9uLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCBpbyBmcm9tICdzb2NrZXQuaW8tY2xpZW50JzsKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdNb2JpbGVDYW1lcmEnLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzdHJlYW06IG51bGwsCiAgICAgIHNvY2tldDogbnVsbCwKICAgICAgc2Nhbm5pbmc6IGZhbHNlLAogICAgICByZWNvZ25pdGlvblRleHQ6ICcnLAogICAgICByZWNvZ25pdGlvbkludGVydmFsOiBudWxsLAogICAgICB2aWRlb0NvbnN0cmFpbnRzOiB7CiAgICAgICAgZmFjaW5nTW9kZTogewogICAgICAgICAgZXhhY3Q6ICJlbnZpcm9ubWVudCIKICAgICAgICB9LAogICAgICAgIC8vIOS9v+eUqOWQjue9ruaRhOWDj+WktAogICAgICAgIHdpZHRoOiB7CiAgICAgICAgICBpZGVhbDogMTI4MAogICAgICAgIH0sCiAgICAgICAgaGVpZ2h0OiB7CiAgICAgICAgICBpZGVhbDogNzIwCiAgICAgICAgfQogICAgICB9LAogICAgICBzdHJlYW1pbmdJbnRlcnZhbDogbnVsbAogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIHN0YXJ0Q2FtZXJhOiBmdW5jdGlvbiBzdGFydENhbWVyYSgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIHNlcnZlclVybCwgdGVzdFJlc3BvbnNlLCBfZXJyb3IkcmVzcG9uc2UsIF9lcnJvciRyZXNwb25zZSRkYXRhOwoKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMDsKICAgICAgICAgICAgICAgIC8vIOWFiOa1i+ivlSBBUEkg6L+e5o6lCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnPT09IFRlc3RpbmcgQVBJIGNvbm5lY3Rpb24gPT09Jyk7CiAgICAgICAgICAgICAgICBzZXJ2ZXJVcmwgPSB3aW5kb3cubG9jYXRpb24uaG9zdG5hbWUgPT09ICdsb2NhbGhvc3QnID8gJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMCcgOiAiaHR0cDovLyIuY29uY2F0KHdpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZSwgIjozMDAwIik7CiAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMzsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdUZXN0aW5nIGVuZHBvaW50OicsICIiLmNvbmNhdChzZXJ2ZXJVcmwsICIvYXBpL3Rlc3QiKSk7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNzsKICAgICAgICAgICAgICAgIHJldHVybiBheGlvcy5nZXQoIiIuY29uY2F0KHNlcnZlclVybCwgIi9hcGkvdGVzdCIpKTsKCiAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgdGVzdFJlc3BvbnNlID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdBUEkgdGVzdCByZXNwb25zZTonLCB0ZXN0UmVzcG9uc2UuZGF0YSk7CgogICAgICAgICAgICAgICAgaWYgKCEoIXRlc3RSZXNwb25zZS5kYXRhLmVudi5hcGlLZXkgfHwgIXRlc3RSZXNwb25zZS5kYXRhLmVudi5hcGlVcmwpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMTsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdBUEkgY29uZmlndXJhdGlvbiBpcyBpbmNvbXBsZXRlJyk7CgogICAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTg7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAxMzsKICAgICAgICAgICAgICAgIF9jb250ZXh0LnQwID0gX2NvbnRleHRbImNhdGNoIl0oMyk7CiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdBUEkgdGVzdCBmYWlsZWQ6JywgX2NvbnRleHQudDApOwogICAgICAgICAgICAgICAgYWxlcnQoJ0FQSSDov57mjqXmtYvor5XlpLHotKU6ICcgKyAoKChfZXJyb3IkcmVzcG9uc2UgPSBfY29udGV4dC50MC5yZXNwb25zZSkgPT09IG51bGwgfHwgX2Vycm9yJHJlc3BvbnNlID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX2Vycm9yJHJlc3BvbnNlJGRhdGEgPSBfZXJyb3IkcmVzcG9uc2UuZGF0YSkgPT09IG51bGwgfHwgX2Vycm9yJHJlc3BvbnNlJGRhdGEgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9lcnJvciRyZXNwb25zZSRkYXRhLm1lc3NhZ2UpIHx8IF9jb250ZXh0LnQwLm1lc3NhZ2UpKTsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDE4OgogICAgICAgICAgICAgICAgLy8g57un57ut5Y6f5pyJ55qE5pGE5YOP5aS05ZCv5Yqo6YC76L6RCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnU3RhcnRpbmcgY2FtZXJhLi4uJyk7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjE7CiAgICAgICAgICAgICAgICByZXR1cm4gbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEoewogICAgICAgICAgICAgICAgICB2aWRlbzogX3RoaXMudmlkZW9Db25zdHJhaW50cwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMjE6CiAgICAgICAgICAgICAgICBfdGhpcy5zdHJlYW0gPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgICAgX3RoaXMuJHJlZnMudmlkZW9FbGVtZW50LnNyY09iamVjdCA9IF90aGlzLnN0cmVhbTsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdTdGFydGluZyBzdHJlYW1pbmcgc2VydmljZS4uLicpOwoKICAgICAgICAgICAgICAgIF90aGlzLnN0YXJ0U3RyZWFtaW5nKCk7CgogICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1N0YXJ0aW5nIHJlY29nbml0aW9uIHNlcnZpY2UuLi4nKTsKCiAgICAgICAgICAgICAgICBfdGhpcy5zdGFydFJlY29nbml0aW9uKCk7CgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDMzOwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMjk6CiAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMjk7CiAgICAgICAgICAgICAgICBfY29udGV4dC50MSA9IF9jb250ZXh0WyJjYXRjaCJdKDApOwogICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignQ2FtZXJhIHN0YXJ0dXAgZXJyb3I6JywgX2NvbnRleHQudDEpOwogICAgICAgICAgICAgICAgYWxlcnQoJ+aXoOazleiuv+mXruaRhOWDj+WktDogJyArIF9jb250ZXh0LnQxLm1lc3NhZ2UpOwoKICAgICAgICAgICAgICBjYXNlIDMzOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSwgbnVsbCwgW1swLCAyOV0sIFszLCAxM11dKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgc3RvcENhbWVyYTogZnVuY3Rpb24gc3RvcENhbWVyYSgpIHsKICAgICAgaWYgKHRoaXMuc3RyZWFtKSB7CiAgICAgICAgdGhpcy5zdHJlYW0uZ2V0VHJhY2tzKCkuZm9yRWFjaChmdW5jdGlvbiAodHJhY2spIHsKICAgICAgICAgIHJldHVybiB0cmFjay5zdG9wKCk7CiAgICAgICAgfSk7CiAgICAgICAgdGhpcy4kcmVmcy52aWRlb0VsZW1lbnQuc3JjT2JqZWN0ID0gbnVsbDsKICAgICAgICB0aGlzLnN0cmVhbSA9IG51bGw7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLnNvY2tldCkgewogICAgICAgIHRoaXMuc29ja2V0LmRpc2Nvbm5lY3QoKTsKICAgICAgICB0aGlzLnNvY2tldCA9IG51bGw7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLnN0cmVhbWluZ0ludGVydmFsKSB7CiAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnN0cmVhbWluZ0ludGVydmFsKTsKICAgICAgICB0aGlzLnN0cmVhbWluZ0ludGVydmFsID0gbnVsbDsKICAgICAgfQoKICAgICAgaWYgKHRoaXMucmVjb2duaXRpb25JbnRlcnZhbCkgewogICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5yZWNvZ25pdGlvbkludGVydmFsKTsKICAgICAgICB0aGlzLnJlY29nbml0aW9uSW50ZXJ2YWwgPSBudWxsOwogICAgICB9CgogICAgICB0aGlzLnJlY29nbml0aW9uVGV4dCA9ICcnOwogICAgfSwKICAgIHN0YXJ0U3RyZWFtaW5nOiBmdW5jdGlvbiBzdGFydFN0cmVhbWluZygpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB2YXIgc2VydmVyVXJsID0gd2luZG93LmxvY2F0aW9uLmhvc3RuYW1lID09PSAnbG9jYWxob3N0JyA/ICdodHRwOi8vbG9jYWxob3N0OjMwMDAnIDogImh0dHBzOi8vIi5jb25jYXQod2luZG93LmxvY2F0aW9uLmhvc3RuYW1lKTsKICAgICAgdGhpcy5zb2NrZXQgPSBpbyhzZXJ2ZXJVcmwsIHsKICAgICAgICB0cmFuc3BvcnRzOiBbJ3dlYnNvY2tldCcsICdwb2xsaW5nJ10sCiAgICAgICAgcGF0aDogJy9zb2NrZXQuaW8nCiAgICAgIH0pOwogICAgICB0aGlzLnNvY2tldC5vbignY29ubmVjdCcsIGZ1bmN0aW9uICgpIHsKICAgICAgICBjb25zb2xlLmxvZygnQ29ubmVjdGVkIHRvIHN0cmVhbWluZyBzZXJ2ZXInKTsKICAgICAgfSk7CiAgICAgIHRoaXMuc29ja2V0Lm9uKCdkaXNjb25uZWN0JywgZnVuY3Rpb24gKCkgewogICAgICAgIGNvbnNvbGUubG9nKCdEaXNjb25uZWN0ZWQgZnJvbSBzdHJlYW1pbmcgc2VydmVyJyk7CiAgICAgIH0pOyAvLyDmr4/pmpTkuIDlrprml7bpl7Tlj5HpgIHop4bpopHluKcKCiAgICAgIHRoaXMuc3RyZWFtaW5nSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7CiAgICAgICAgaWYgKF90aGlzMi5zdHJlYW0gJiYgX3RoaXMyLnNvY2tldCAmJiBfdGhpczIuc29ja2V0LmNvbm5lY3RlZCkgewogICAgICAgICAgdmFyIGNhbnZhcyA9IF90aGlzMi4kcmVmcy5jYW52YXNFbGVtZW50OwogICAgICAgICAgdmFyIHZpZGVvID0gX3RoaXMyLiRyZWZzLnZpZGVvRWxlbWVudDsKICAgICAgICAgIHZhciBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7CiAgICAgICAgICBjYW52YXMud2lkdGggPSB2aWRlby52aWRlb1dpZHRoOwogICAgICAgICAgY2FudmFzLmhlaWdodCA9IHZpZGVvLnZpZGVvSGVpZ2h0OwogICAgICAgICAgY29udGV4dC5kcmF3SW1hZ2UodmlkZW8sIDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7CiAgICAgICAgICB2YXIgaW1hZ2VEYXRhID0gY2FudmFzLnRvRGF0YVVSTCgnaW1hZ2UvanBlZycsIDAuNSk7CgogICAgICAgICAgX3RoaXMyLnNvY2tldC5lbWl0KCd2aWRlb0ZyYW1lJywgewogICAgICAgICAgICBpbWFnZTogaW1hZ2VEYXRhLAogICAgICAgICAgICByZWNvZ25pdGlvblRleHQ6IF90aGlzMi5yZWNvZ25pdGlvblRleHQKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSwgMTAwKTsKICAgIH0sCiAgICBzdGFydFJlY29nbml0aW9uOiBmdW5jdGlvbiBzdGFydFJlY29nbml0aW9uKCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIGNvbnNvbGUubG9nKCc9PT0gU3RhcnRpbmcgcmVjb2duaXRpb24gc2VydmljZSA9PT0nKTsgLy8g5YWI5Y+R6YCB5LiA5Liq5rWL6K+V5Zu+54mHCgogICAgICBzZXRUaW1lb3V0KCAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICB2YXIgdGVzdEltYWdlRGF0YSwgc2VydmVyVXJsLCByZXNwb25zZTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQyLnByZXYgPSAwOwogICAgICAgICAgICAgICAgdGVzdEltYWdlRGF0YSA9ICdkYXRhOmltYWdlL2pwZWc7YmFzZTY0LC85ai80QUFRU2taSlJnQUJBUUVBWUFCZ0FBRC8yd0JEQUFnR0JnY0dCUWdIQndjSkNRZ0tEQlFOREFzTERCa1NFdzhVSFJvZkhoMGFIQndnSkM0bklDSXNJeHdjS0RjcExEQXhORFEwSHljNVBUZ3lQQzR6TkRMLzJ3QkRBUWtKQ1F3TERCZ05EUmd5SVJ3aE1qSXlNakl5TWpJeU1qSXlNakl5TWpJeU1qSXlNakl5TWpJeU1qSXlNakl5TWpJeU1qSXlNakl5TWpJeU1qSXlNakwvd0FBUkNBQUlBQW9EQVNJQUFoRUJBeEVCLzhRQUZRQUJBUUFBQUFBQUFBQUFBQUFBQUFBQUFBYi94QUFVRUFFQUFBQUFBQUFBQUFBQUFBQUFBQUFBLzhRQUZRRUJBUUFBQUFBQUFBQUFBQUFBQUFBQUFBWC94QUFVRVFFQUFBQUFBQUFBQUFBQUFBQUFBQUFBLzlvQURBTUJBQUlSQXhFQVB3Q2RBQm1YLzlrPSc7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnPT09IFNlbmRpbmcgdGVzdCBpbWFnZSA9PT0nKTsKICAgICAgICAgICAgICAgIHNlcnZlclVybCA9IHdpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZSA9PT0gJ2xvY2FsaG9zdCcgPyAnaHR0cDovL2xvY2FsaG9zdDozMDAwJyA6ICJodHRwOi8vIi5jb25jYXQod2luZG93LmxvY2F0aW9uLmhvc3RuYW1lLCAiOjMwMDAiKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNjsKICAgICAgICAgICAgICAgIHJldHVybiBheGlvcy5wb3N0KCIiLmNvbmNhdChzZXJ2ZXJVcmwsICIvYXBpL3JlY29nbml6ZSIpLCB7CiAgICAgICAgICAgICAgICAgIGltYWdlOiB0ZXN0SW1hZ2VEYXRhCiAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIHRpbWVvdXQ6IDMwMDAwCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdUZXN0IGltYWdlIHJlc3BvbnNlOicsIHJlc3BvbnNlLmRhdGEpOwogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxMzsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgICAgX2NvbnRleHQyLnByZXYgPSAxMDsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi50MCA9IF9jb250ZXh0MlsiY2F0Y2giXSgwKTsKICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1Rlc3QgaW1hZ2UgcmVjb2duaXRpb24gZmFpbGVkOicsIF9jb250ZXh0Mi50MCk7CgogICAgICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIsIG51bGwsIFtbMCwgMTBdXSk7CiAgICAgIH0pKSwgMTAwMCk7IC8vIOWOn+acieeahOivhuWIq+mAu+i+kQoKICAgICAgdGhpcy5yZWNvZ25pdGlvbkludGVydmFsID0gc2V0SW50ZXJ2YWwoIC8qI19fUFVSRV9fKi9fYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKCkgewogICAgICAgIHZhciBjYW52YXMsIHZpZGVvLCBjb250ZXh0LCBpbWFnZURhdGEsIHNlcnZlclVybCwgcmVzcG9uc2U7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGlmICghX3RoaXMzLnN0cmVhbSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDQwOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfY29udGV4dDMucHJldiA9IDE7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnPT09IENhcHR1cmluZyBmcmFtZSA9PT0nKTsKICAgICAgICAgICAgICAgIGNhbnZhcyA9IF90aGlzMy4kcmVmcy5jYW52YXNFbGVtZW50OwogICAgICAgICAgICAgICAgdmlkZW8gPSBfdGhpczMuJHJlZnMudmlkZW9FbGVtZW50OwogICAgICAgICAgICAgICAgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpOyAvLyDorr7nva7ovoPlsI/nmoTlsLrlr7jku6Xlh4/lsJHmlbDmja7ph48KCiAgICAgICAgICAgICAgICBjYW52YXMud2lkdGggPSAzMjA7CiAgICAgICAgICAgICAgICBjYW52YXMuaGVpZ2h0ID0gMjQwOwogICAgICAgICAgICAgICAgY29udGV4dC5kcmF3SW1hZ2UodmlkZW8sIDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7IC8vIOiOt+WPlmJhc2U2NOWbvueJh+aVsOaNrgoKICAgICAgICAgICAgICAgIGltYWdlRGF0YSA9IGNhbnZhcy50b0RhdGFVUkwoJ2ltYWdlL2pwZWcnLCAwLjUpOwogICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0ltYWdlIGNhcHR1cmVkOicsIHsKICAgICAgICAgICAgICAgICAgc2l6ZTogaW1hZ2VEYXRhLmxlbmd0aCwKICAgICAgICAgICAgICAgICAgcHJlZml4OiBpbWFnZURhdGEuc3Vic3RyaW5nKDAsIDUwKSArICcuLi4nCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCc9PT0gU2VuZGluZyByZXF1ZXN0IHRvIHNlcnZlciA9PT0nKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0My5wcmV2ID0gMTI7CiAgICAgICAgICAgICAgICBzZXJ2ZXJVcmwgPSB3aW5kb3cubG9jYXRpb24uaG9zdG5hbWUgPT09ICdsb2NhbGhvc3QnID8gJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMCcgOiAiaHR0cDovLyIuY29uY2F0KHdpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZSwgIjozMDAwIik7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnU2VydmVyIFVSTDonLCBzZXJ2ZXJVcmwgKyAnL2FwaS9yZWNvZ25pemUnKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMTc7CiAgICAgICAgICAgICAgICByZXR1cm4gYXhpb3MucG9zdChzZXJ2ZXJVcmwgKyAnL2FwaS9yZWNvZ25pemUnLCB7CiAgICAgICAgICAgICAgICAgIGltYWdlOiBpbWFnZURhdGEKICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgdGltZW91dDogMzAwMDAKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDE3OgogICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dDMuc2VudDsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCc9PT0gU2VydmVyIHJlc3BvbnNlID09PScpOwogICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1N0YXR1czonLCByZXNwb25zZS5zdGF0dXMpOwogICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0hlYWRlcnM6JywgcmVzcG9uc2UuaGVhZGVycyk7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnRGF0YTonLCByZXNwb25zZS5kYXRhKTsKCiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YSAmJiByZXNwb25zZS5kYXRhLmRlc2NyaXB0aW9uKSB7CiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCc9PT0gVXBkYXRpbmcgcmVjb2duaXRpb24gdGV4dCA9PT0nKTsKICAgICAgICAgICAgICAgICAgX3RoaXMzLnJlY29nbml0aW9uVGV4dCA9IHJlc3BvbnNlLmRhdGEuZGVzY3JpcHRpb247CgogICAgICAgICAgICAgICAgICBpZiAoX3RoaXMzLnNvY2tldCAmJiBfdGhpczMuc29ja2V0LmNvbm5lY3RlZCkgewogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCc9PT0gQnJvYWRjYXN0aW5nIHJlc3VsdCA9PT0nKTsKCiAgICAgICAgICAgICAgICAgICAgX3RoaXMzLnNvY2tldC5lbWl0KCd2aWRlb0ZyYW1lJywgewogICAgICAgICAgICAgICAgICAgICAgaW1hZ2U6IGltYWdlRGF0YSwKICAgICAgICAgICAgICAgICAgICAgIHJlY29nbml0aW9uVGV4dDogX3RoaXMzLnJlY29nbml0aW9uVGV4dAogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAzMTsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDI1OgogICAgICAgICAgICAgICAgX2NvbnRleHQzLnByZXYgPSAyNTsKICAgICAgICAgICAgICAgIF9jb250ZXh0My50MCA9IF9jb250ZXh0M1siY2F0Y2giXSgxMik7CiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCc9PT0gQVBJIENhbGwgRXJyb3IgPT09Jyk7CiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB0eXBlOicsIF9jb250ZXh0My50MC5jb25zdHJ1Y3Rvci5uYW1lKTsKICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIG1lc3NhZ2U6JywgX2NvbnRleHQzLnQwLm1lc3NhZ2UpOwoKICAgICAgICAgICAgICAgIGlmIChfY29udGV4dDMudDAucmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignUmVzcG9uc2Ugc3RhdHVzOicsIF9jb250ZXh0My50MC5yZXNwb25zZS5zdGF0dXMpOwogICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdSZXNwb25zZSBkYXRhOicsIF9jb250ZXh0My50MC5yZXNwb25zZS5kYXRhKTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoX2NvbnRleHQzLnQwLnJlcXVlc3QpIHsKICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignTm8gcmVzcG9uc2UgcmVjZWl2ZWQgLSBwb3NzaWJsZSBuZXR3b3JrIGVycm9yJyk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGNhc2UgMzE6CiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDM4OwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMzM6CiAgICAgICAgICAgICAgICBfY29udGV4dDMucHJldiA9IDMzOwogICAgICAgICAgICAgICAgX2NvbnRleHQzLnQxID0gX2NvbnRleHQzWyJjYXRjaCJdKDEpOwogICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignPT09IEltYWdlIFByb2Nlc3NpbmcgRXJyb3IgPT09Jyk7CiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB0eXBlOicsIF9jb250ZXh0My50MS5jb25zdHJ1Y3Rvci5uYW1lKTsKICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIG1lc3NhZ2U6JywgX2NvbnRleHQzLnQxLm1lc3NhZ2UpOwoKICAgICAgICAgICAgICBjYXNlIDM4OgogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA0MTsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDQwOgogICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1N0cmVhbSBub3QgYXZhaWxhYmxlJyk7CgogICAgICAgICAgICAgIGNhc2UgNDE6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTMsIG51bGwsIFtbMSwgMzNdLCBbMTIsIDI1XV0pOwogICAgICB9KSksIDgwMDApOwogICAgfSwKICAgIC8vIOa3u+WKoOWbvueJh+S4iuS8oOWIsOWbvuW6iueahOWHveaVsAogICAgdXBsb2FkVG9JbWFnZUhvc3Q6IGZ1bmN0aW9uIHVwbG9hZFRvSW1hZ2VIb3N0KGltYWdlRGF0YSkgewogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNCgpIHsKICAgICAgICB2YXIgZm9ybURhdGEsIGJsb2IsIHJlc3BvbnNlOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNCQoX2NvbnRleHQ0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NC5wcmV2ID0gX2NvbnRleHQ0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dDQucHJldiA9IDA7CiAgICAgICAgICAgICAgICBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpOyAvLyDlsIZiYXNlNjTovazmjaLkuLrmlofku7YKCiAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICByZXR1cm4gZmV0Y2goaW1hZ2VEYXRhKS50aGVuKGZ1bmN0aW9uIChyKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiByLmJsb2IoKTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICBibG9iID0gX2NvbnRleHQ0LnNlbnQ7CiAgICAgICAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ2ltYWdlJywgYmxvYik7IC8vIOi/memHjOabv+aNouS4uuWunumZheeahOWbvuW6iuS4iuS8oEFQSQoKICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gODsKICAgICAgICAgICAgICAgIHJldHVybiBheGlvcy5wb3N0KCdZT1VSX0lNQUdFX0hPU1RfQVBJJywgZm9ybURhdGEsIHsKICAgICAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnbXVsdGlwYXJ0L2Zvcm0tZGF0YScKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQ0LnNlbnQ7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LmFicnVwdCgicmV0dXJuIiwgcmVzcG9uc2UuZGF0YS51cmwpOwoKICAgICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgICAgX2NvbnRleHQ0LnByZXYgPSAxMjsKICAgICAgICAgICAgICAgIF9jb250ZXh0NC50MCA9IF9jb250ZXh0NFsiY2F0Y2giXSgwKTsKICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHVwbG9hZGluZyBpbWFnZTonLCBfY29udGV4dDQudDApOwogICAgICAgICAgICAgICAgdGhyb3cgX2NvbnRleHQ0LnQwOwoKICAgICAgICAgICAgICBjYXNlIDE2OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU0LCBudWxsLCBbWzAsIDEyXV0pOwogICAgICB9KSkoKTsKICAgIH0KICB9LAogIGJlZm9yZURlc3Ryb3k6IGZ1bmN0aW9uIGJlZm9yZURlc3Ryb3koKSB7CiAgICB0aGlzLnN0b3BDYW1lcmEoKTsKICB9Cn07"},{"version":3,"sources":["D:\\project\\中国古代天文学成就可视化\\myapp\\src\\components\\MobileCamera.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div class=\"camera-container\">\r\n    <div class=\"video-wrapper\">\r\n      <video ref=\"videoElement\" autoplay playsinline></video>\r\n      <div class=\"recognition-result\" v-if=\"recognitionText\">\r\n        {{ recognitionText }}\r\n      </div>\r\n    </div>\r\n    <canvas ref=\"canvasElement\" style=\"display: none;\"></canvas>\r\n    <div class=\"controls\">\r\n      <button @click=\"startCamera\">开启摄像头</button>\r\n      <button @click=\"stopCamera\">关闭摄像头</button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport io from 'socket.io-client'\r\nimport axios from 'axios'\r\n\r\nexport default {\r\n  name: 'MobileCamera',\r\n  data() {\r\n    return {\r\n      stream: null,\r\n      socket: null,\r\n      scanning: false,\r\n      recognitionText: '',\r\n      recognitionInterval: null,\r\n      videoConstraints: {\r\n        facingMode: { exact: \"environment\" }, // 使用后置摄像头\r\n        width: { ideal: 1280 },\r\n        height: { ideal: 720 }\r\n      },\r\n      streamingInterval: null\r\n    }\r\n  },\r\n  methods: {\r\n    async startCamera() {\r\n      try {\r\n        // 先测试 API 连接\r\n        console.log('=== Testing API connection ===');\r\n        const serverUrl = window.location.hostname === 'localhost' ? \r\n          'http://localhost:3000' : `http://${window.location.hostname}:3000`;\r\n        \r\n        try {\r\n          console.log('Testing endpoint:', `${serverUrl}/api/test`);\r\n          const testResponse = await axios.get(`${serverUrl}/api/test`);\r\n          console.log('API test response:', testResponse.data);\r\n          \r\n          if (!testResponse.data.env.apiKey || !testResponse.data.env.apiUrl) {\r\n            throw new Error('API configuration is incomplete');\r\n          }\r\n        } catch (error) {\r\n          console.error('API test failed:', error);\r\n          alert('API 连接测试失败: ' + (error.response?.data?.message || error.message));\r\n          return;\r\n        }\r\n\r\n        // 继续原有的摄像头启动逻辑\r\n        console.log('Starting camera...');\r\n        this.stream = await navigator.mediaDevices.getUserMedia({\r\n          video: this.videoConstraints\r\n        });\r\n        this.$refs.videoElement.srcObject = this.stream;\r\n        \r\n        console.log('Starting streaming service...');\r\n        this.startStreaming();\r\n        \r\n        console.log('Starting recognition service...');\r\n        this.startRecognition();\r\n      } catch (error) {\r\n        console.error('Camera startup error:', error);\r\n        alert('无法访问摄像头: ' + error.message);\r\n      }\r\n    },\r\n    stopCamera() {\r\n      if (this.stream) {\r\n        this.stream.getTracks().forEach(track => track.stop());\r\n        this.$refs.videoElement.srcObject = null;\r\n        this.stream = null;\r\n      }\r\n      if (this.socket) {\r\n        this.socket.disconnect();\r\n        this.socket = null;\r\n      }\r\n      if (this.streamingInterval) {\r\n        clearInterval(this.streamingInterval);\r\n        this.streamingInterval = null;\r\n      }\r\n      if (this.recognitionInterval) {\r\n        clearInterval(this.recognitionInterval);\r\n        this.recognitionInterval = null;\r\n      }\r\n      this.recognitionText = '';\r\n    },\r\n    startStreaming() {\r\n      const serverUrl = window.location.hostname === 'localhost' \r\n        ? 'http://localhost:3000' \r\n        : `https://${window.location.hostname}`;\r\n      \r\n      this.socket = io(serverUrl, {\r\n        transports: ['websocket', 'polling'],\r\n        path: '/socket.io'\r\n      });\r\n\r\n      this.socket.on('connect', () => {\r\n        console.log('Connected to streaming server');\r\n      });\r\n\r\n      this.socket.on('disconnect', () => {\r\n        console.log('Disconnected from streaming server');\r\n      });\r\n\r\n      // 每隔一定时间发送视频帧\r\n      this.streamingInterval = setInterval(() => {\r\n        if (this.stream && this.socket && this.socket.connected) {\r\n          const canvas = this.$refs.canvasElement;\r\n          const video = this.$refs.videoElement;\r\n          const context = canvas.getContext('2d');\r\n          \r\n          canvas.width = video.videoWidth;\r\n          canvas.height = video.videoHeight;\r\n          context.drawImage(video, 0, 0, canvas.width, canvas.height);\r\n          \r\n          const imageData = canvas.toDataURL('image/jpeg', 0.5);\r\n          this.socket.emit('videoFrame', {\r\n            image: imageData,\r\n            recognitionText: this.recognitionText\r\n          });\r\n        }\r\n      }, 100);\r\n    },\r\n    startRecognition() {\r\n      console.log('=== Starting recognition service ===');\r\n      // 先发送一个测试图片\r\n      setTimeout(async () => {\r\n        try {\r\n          const testImageData = 'data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/2wBDAAgGBgcGBQgHBwcJCQgKDBQNDAsLDBkSEw8UHRofHh0aHBwgJC4nICIsIxwcKDcpLDAxNDQ0Hyc5PTgyPC4zNDL/2wBDAQkJCQwLDBgNDRgyIRwhMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjL/wAARCAAIAAoDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAb/xAAUEAEAAAAAAAAAAAAAAAAAAAAA/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAX/xAAUEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwCdABmX/9k=';\r\n          \r\n          console.log('=== Sending test image ===');\r\n          const serverUrl = window.location.hostname === 'localhost' ? \r\n            'http://localhost:3000' : `http://${window.location.hostname}:3000`;\r\n          \r\n          const response = await axios.post(`${serverUrl}/api/recognize`, {\r\n            image: testImageData\r\n          }, {\r\n            headers: {\r\n              'Content-Type': 'application/json'\r\n            },\r\n            timeout: 30000\r\n          });\r\n          \r\n          console.log('Test image response:', response.data);\r\n        } catch (error) {\r\n          console.error('Test image recognition failed:', error);\r\n        }\r\n      }, 1000);\r\n\r\n      // 原有的识别逻辑\r\n      this.recognitionInterval = setInterval(async () => {\r\n        if (this.stream) {\r\n          try {\r\n            console.log('=== Capturing frame ===');\r\n            const canvas = this.$refs.canvasElement;\r\n            const video = this.$refs.videoElement;\r\n            const context = canvas.getContext('2d');\r\n            \r\n            // 设置较小的尺寸以减少数据量\r\n            canvas.width = 320;\r\n            canvas.height = 240;\r\n            context.drawImage(video, 0, 0, canvas.width, canvas.height);\r\n            \r\n            // 获取base64图片数据\r\n            const imageData = canvas.toDataURL('image/jpeg', 0.5);\r\n            console.log('Image captured:', {\r\n              size: imageData.length,\r\n              prefix: imageData.substring(0, 50) + '...'\r\n            });\r\n            \r\n            console.log('=== Sending request to server ===');\r\n            try {\r\n              const serverUrl = window.location.hostname === 'localhost' ? \r\n                'http://localhost:3000' : `http://${window.location.hostname}:3000`;\r\n              \r\n              console.log('Server URL:', serverUrl + '/api/recognize');\r\n              const response = await axios.post(serverUrl + '/api/recognize', {\r\n                image: imageData\r\n              }, {\r\n                headers: {\r\n                  'Content-Type': 'application/json'\r\n                },\r\n                timeout: 30000\r\n              });\r\n              \r\n              console.log('=== Server response ===');\r\n              console.log('Status:', response.status);\r\n              console.log('Headers:', response.headers);\r\n              console.log('Data:', response.data);\r\n              \r\n              if (response.data && response.data.description) {\r\n                console.log('=== Updating recognition text ===');\r\n                this.recognitionText = response.data.description;\r\n                \r\n                if (this.socket && this.socket.connected) {\r\n                  console.log('=== Broadcasting result ===');\r\n                  this.socket.emit('videoFrame', {\r\n                    image: imageData,\r\n                    recognitionText: this.recognitionText\r\n                  });\r\n                }\r\n              }\r\n            } catch (error) {\r\n              console.error('=== API Call Error ===');\r\n              console.error('Error type:', error.constructor.name);\r\n              console.error('Error message:', error.message);\r\n              if (error.response) {\r\n                console.error('Response status:', error.response.status);\r\n                console.error('Response data:', error.response.data);\r\n              } else if (error.request) {\r\n                console.error('No response received - possible network error');\r\n              }\r\n            }\r\n          } catch (error) {\r\n            console.error('=== Image Processing Error ===');\r\n            console.error('Error type:', error.constructor.name);\r\n            console.error('Error message:', error.message);\r\n          }\r\n        } else {\r\n          console.log('Stream not available');\r\n        }\r\n      }, 8000);\r\n    },\r\n    // 添加图片上传到图床的函数\r\n    async uploadToImageHost(imageData) {\r\n      // 这里需要实现实际的图片上传逻辑\r\n      // 可以使用第三方图床API，如七牛云、阿里云OSS等\r\n      // 返回上传后的图片URL\r\n      try {\r\n        const formData = new FormData();\r\n        // 将base64转换为文件\r\n        const blob = await fetch(imageData).then(r => r.blob());\r\n        formData.append('image', blob);\r\n        \r\n        // 这里替换为实际的图床上传API\r\n        const response = await axios.post('YOUR_IMAGE_HOST_API', formData, {\r\n          headers: {\r\n            'Content-Type': 'multipart/form-data'\r\n          }\r\n        });\r\n        \r\n        return response.data.url; // 返回上传后的图片URL\r\n      } catch (error) {\r\n        console.error('Error uploading image:', error);\r\n        throw error;\r\n      }\r\n    }\r\n  },\r\n  beforeDestroy() {\r\n    this.stopCamera();\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.camera-container {\r\n  width: 100%;\r\n  max-width: 800px;\r\n  margin: 0 auto;\r\n  padding: 20px;\r\n}\r\n\r\n.video-wrapper {\r\n  position: relative;\r\n  width: 100%;\r\n  max-width: 640px;\r\n  margin: 0 auto;\r\n}\r\n\r\nvideo {\r\n  width: 100%;\r\n  display: block;\r\n  border: 1px solid #ccc;\r\n  border-radius: 8px;\r\n}\r\n\r\n.recognition-result {\r\n  position: absolute;\r\n  bottom: 20px;\r\n  left: 20px;\r\n  right: 20px;\r\n  background: rgba(0, 0, 0, 0.7);\r\n  color: white;\r\n  padding: 10px;\r\n  border-radius: 4px;\r\n  font-size: 14px;\r\n  line-height: 1.4;\r\n}\r\n\r\n.controls {\r\n  margin-top: 20px;\r\n  text-align: center;\r\n}\r\n\r\nbutton {\r\n  margin: 0 10px;\r\n  padding: 10px 20px;\r\n  background-color: #4CAF50;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n}\r\n\r\nbutton:hover {\r\n  background-color: #45a049;\r\n}\r\n</style> "],"sourceRoot":""}]}